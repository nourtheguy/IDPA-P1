<!DOCTYPE html>
<html>

<head>
    <title>File Upload</title>
    <link rel="stylesheet" type="text/css" href="../static/styles.css">
</head>

<body>
    <h1>Upload Two Files</h1>
    <form action="/" method="post" enctype="multipart/form-data">
        <label for="file1">File 1:</label>
        <input type="file" name="file1" id="file1" /><br /><br />
        <label for="file2">File 2:</label>
        <input type="file" name="file2" id="file2" /><br /><br />
        <label for="weighting">Term Weighting:</label>
        <input type="radio" name="weighting" value="TF" id="tf" checked />
        <label for="tf">TF</label>
        <input type="radio" name="weighting" value="IDF" id="idf" />
        <label for="idf">IDF</label>
        <input type="radio" name="weighting" value="Both" id="both" />
        <label for="both">Both</label><br /><br />
        <label for="similarity">Similarity Method:</label>
        <input type="radio" name="similarity" value="cosine" id="cosine" checked />
        <label for="cosine">Cosine</label>
        <input type="submit" value="Compute" />
    </form>

    {% if message %}
        <p>{{ message }}</p>
        <p>Preprocessed Tokens for File 1: {{ preprocessed_text1 }}</p>
        <p>Preprocessed Tokens for File 2: {{ preprocessed_text2 }}</p>

        {% if similarity_score is defined %}
            <p>Similarity Score: {{ similarity_score }}</p>
        {% endif %}

        {% if v1 is defined %}
            <p>Vectors for File 1:</p>
            <ul>
                {% for vector in v1 %}
                    <li>{{ vector }}</li>
                {% endfor %}
            </ul>
        {% endif %}

        {% if v2 is defined %}
            <p>Vectors for File 2:</p>
            <ul>
                {% for vector in v2 %}
                    <li>{{ vector }}</li>
                {% endfor %}
            </ul>
        {% endif %}

        {% if term_weights is defined %}
            {% if weighting == "Both" %}
                <!-- Display both TF and IDF values -->
                <p>Term Weights for File 1 (TF):</p>
                <ul>
                    {% for term, tf_value in term_weights["TF"]["Document1"] %}
                        <li>{{ term }}: {{ tf_value }}</li>
                    {% endfor %}
                </ul>
                <p>Term Weights for File 1 (IDF):</p>
                <ul>
                    {% for term, idf_value in term_weights["IDF"]["Document1"] %}
                        <li>{{ term }}: {{ idf_value }}</li>
                    {% endfor %}
                </ul>
                <p>Term Weights for File 1 (TF-IDF):</p>
                <ul>
                    {% for term, tfidf_value in term_weights["TF-IDF"]["Document1"] %}
                        <li>{{ term }}: {{ tfidf_value }}</li>
                    {% endfor %}
                </ul>

                <p>Term Weights for File 2 (TF):</p>
                <ul>
                    {% for term, tf_value in term_weights["TF"]["Document2"] %}
                        <li>{{ term }}: {{ tf_value }}</li>
                    {% endfor %}
                </ul>
                <p>Term Weights for File 2 (IDF):</p>
                <ul>
                    {% for term, idf_value in term_weights["IDF"]["Document2"] %}
                        <li>{{ term }}: {{ idf_value }}</li>
                    {% endfor %}
                </ul>
                <p>Term Weights for File 2 (TF-IDF):</p>
                <ul>
                    {% for term, tfidf_value in term_weights["TF-IDF"]["Document2"] %}
                        <li>{{ term }}: {{ tfidf_value }}</li>
                    {% endfor %}
                </ul>
            {% elif weighting == "TF" %}
                <!-- Display only TF values -->
                <p>Term Weights for File 1 (TF):</p>
                <ul>
                    {% for term, tf_value in term_weights["TF"]["Document1"] %}
                        <li>{{ term }}: {{ tf_value }}</li>
                    {% endfor %}
                </ul>
                <p>Term Weights for File 2 (TF):</p>
                <ul>
                    {% for term, tf_value in term_weights["TF"]["Document2"] %}
                        <li>{{ term }}: {{ tf_value }}</li>
                    {% endfor %}
                </ul>
            {% elif weighting == "IDF" %}
                <!-- Display only IDF values -->
                <p>Term Weights for File 1 (IDF):</p>
                <ul>
                    {% for term, idf_value in term_weights["IDF"]["Document1"] %}
                        <li>{{ term }}: {{ idf_value }}</li>
                    {% endfor %}
                </ul>
                <p>Term Weights for File 2 (IDF):</p>
                <ul>
                    {% for term, idf_value in term_weights["IDF"]["Document2"] %}
                        <li>{{ term }}: {{ idf_value }}</li>
                    {% endfor %}
                </ul>
            {% endif %}
        {% endif %}
    {% endif %}

    <h1>Search Documents</h1>
    <form action="/search" method="post">
        <label for="query">Search Query:</label>
        <input type="text" name="query" id="query" />
        <input type="submit" value="Search" />
    </form>

    <!-- Display search results here -->
    {% if search_results is defined %}
        {% if search_results %}
            <h2>Search Results:</h2>
            <ul>
                {% for path, score in search_results %}
                    <li>Document: {{ path }}, Similarity: {{ score }}</li>
                {% endfor %}
            </ul>
        {% else %}
            <p>No search results.</p>
        {% endif %}
    {% endif %}
</body>

</html>
